<%- include('../include/head.ejs')  %>
<link rel="Stylesheet" href="/css/dashboard.css" />
<link rel="Stylesheet" href="/css/form.css" />
<link rel="Stylesheet" href="/css/notification-box.css" />
</head>
<body bgcolor="whitesmoke">
    <%- include('../include/nav.ejs') %>
    <div class="<%= errorDetails.find(e => e.msg != undefined) ? 'alert' : ''%> <%= errorMessage == 'Operation Successful' ? 'success' : errorMessage == '' ? '' : 'fail' %>">
        <span  class="closebtn" >&times;</span>
        <% if (errorDetails.length >= 1) { %>
            <div class="row">
                <div class="col s12 m8 transparent">
                    <h6><%= errorMessage %> </h6>
                    <% for( let index = 0; index < errorDetails.length; index++ ) { %>
                        <p><%= errorDetails[index].msg %> </p>
                    <% } %>
                </div>
            </div>
        <% } %>
    </div>
        <div class="container">
        <div class="container">
            
            <div class="row">
                <div class="col s4">
                    <h5>Profile</h5>
                </div>
            </div>
            <div class="white">
                <div class="row">
                    
                    <form class="col s12 offset-m1 offset-l1 m7" action="/dashboard/profile" method="POST" encType="multipart/form-data">
                        <div class="col s8 m4 offset-s2">
                            <img src="<%= user.imageUrl %>" alt="my-img" class="circle responsive-img">
                            <input name="imageUrl" type="file">
                        </div>
                        <div class="row">
                            <div class="col s12">
                                <div class="input-field col s12">
                                    <label for="username">Username</label>
                                    <input name="username" type="text" value="<%= user.username %>" disabled>
                                </div>
                                <div class="input-field col s12">
                                    <label for="email">Email</label>
                                    <input name="email" type="email" value="<%= user.email %>"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s4 offset-s8 offset-m8 offset-l8 m4">
                                <button class="btn-small blue text-darken-3">Update</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
    </div>
    

    <script src="/js/dashboardScript.js"></script>
<%- include('../include/end.ejs') %> 